import streamlit as st
import numpy as np
import tensorflow as tf
from PIL import Image

# ----------------------------------
# Page Config
# ----------------------------------
st.set_page_config(
    page_title="AI Hair Health Analysis",
    page_icon="ЁЯТЗтАНтЩАя╕П",
    layout="centered"
)

st.title("ЁЯТЗтАНтЩАя╕П AI Hair Health Analysis")
st.write("Upload your scalp image to check hair health.")

# ----------------------------------
# Load Model
# ----------------------------------
@st.cache_resource
def load_model():
    model = tf.keras.models.load_model("hair_model.h5")
    return model

model = load_model()

classes = ["Dandruff", "Hair Loss", "Healthy", "Oily"]

# ----------------------------------
# Suggestions in Languages
# ----------------------------------
suggestions = {
    "Hair Loss": {
        "English": """Eat eggs, milk, dal, nuts and green vegetables.
Drink milk daily for calcium.
Eat iron foods like spinach and dates.
Use mild shampoo and reduce heat styling.
Sleep well and reduce stress.
Consult a doctor if hair fall is severe.""",

        "Telugu": """р░Чр▒Бр░бр▒Нр░▓р▒Б, р░кр░╛р░▓р▒Б, р░кр░кр▒Нр░кр▒Бр░▓р▒Б, р░бр▒Нр░░р▒Ир░лр▒Нр░░р▒Вр░Яр▒Нр░╕р▒Н, р░Жр░Хр▒Бр░Хр▒Вр░░р░▓р▒Б р░др░┐р░ир░Вр░бр░┐.
р░кр▒Нр░░р░др░┐р░░р▒Лр░Ьр▒В р░кр░╛р░▓р▒Б р░др░╛р░Чр░Вр░бр░┐.
р░кр░╛р░▓р░Хр▒Вр░░, р░Цр░░р▒Нр░Ьр▒Вр░░р░В р░╡р░Вр░Яр░┐ р░Зр░ир▒Бр░ор▒Б р░Жр░╣р░╛р░░р░В р░др▒Ар░╕р▒Бр░Хр▒Лр░Вр░бр░┐.
р░др▒Зр░▓р░┐р░Хр░кр░╛р░Яр░┐ р░╖р░╛р░Вр░кр▒В р░╡р░╛р░бр░Вр░бр░┐.
р░╕р▒Нр░Яр▒Нр░░р▒Жр░╕р▒Н р░др░Чр▒Нр░Чр░┐р░Вр░Ър▒Бр░Хр▒Бр░ир░┐ р░мр░╛р░Чр░╛ р░ир░┐р░жр▒Нр░░р░кр▒Лр░Вр░бр░┐.""",

        "Hindi": """рдЕрдВрдбреЗ, рджреВрдз, рджрд╛рд▓, рдбреНрд░рд╛рдИ рдлреНрд░реВрдЯреНрд╕ рдФрд░ рд╣рд░реА рд╕рдмреНрдЬрд┐рдпрд╛рдВ рдЦрд╛рдПрдВред
рд░реЛрдЬ рджреВрдз рдкрд┐рдПрдВред
рдкрд╛рд▓рдХ рдФрд░ рдЦрдЬреВрд░ рдЬреИрд╕реЗ рдЖрдпрд░рди рд╡рд╛рд▓реЗ рднреЛрдЬрди рд▓реЗрдВред
рд╣рд▓реНрдХрд╛ рд╢реИрдореНрдкреВ рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд░реЗрдВред
рддрдирд╛рд╡ рдХрдо рдХрд░реЗрдВ рдФрд░ рдЕрдЪреНрдЫреА рдиреАрдВрдж рд▓реЗрдВред""",

        "Tamil": """роорпБроЯрпНроЯрпИ, рокро╛ро▓рпН, рокро░рпБрокрпНрокрпБ, роироЯрпНро╕рпН рооро▒рпНро▒рпБроорпН роХрпАро░рпИ роЪро╛рокрпНрокро┐роЯрпБроЩрпНроХро│рпН.
родро┐ройроорпБроорпН рокро╛ро▓рпН роХрпБроЯро┐роХрпНроХро╡рпБроорпН.
рокроЪро▓рпИроХрпН роХрпАро░рпИ рооро▒рпНро▒рпБроорпН рокрпЗро░рпАроЪрпНроЪроорпНрокро┤роорпН рокрпЛройрпНро▒ роЗро░рпБроорпНрокрпБ роЙрогро╡рпБ роЪро╛рокрпНрокро┐роЯрпБроЩрпНроХро│рпН.
роорпЖройрпНроорпИропро╛рой ро╖ро╛роорпНрокрпБ рокропройрпНрокроЯрпБродрпНродрпБроЩрпНроХро│рпН.
роорой роЕро┤рпБродрпНродродрпНродрпИ роХрпБро▒рпИродрпНродрпБ роиройрпНро▒ро╛роХ родрпВроЩрпНроХрпБроЩрпНроХро│рпН."""
    },

    "Dandruff": {
        "English": """Drink plenty of water and eat fruits.
Eat curd, milk and nuts for scalp health.
Use anti-dandruff shampoo twice a week.
Avoid junk and oily foods.
Keep scalp clean and dry.""",

        "Telugu": """р░ир▒Ар░░р▒Б р░Ор░Хр▒Нр░Хр▒Бр░╡р░Чр░╛ р░др░╛р░Чр░Вр░бр░┐, р░кр░Вр░бр▒Нр░▓р▒Б р░др░┐р░ир░Вр░бр░┐.
р░кр▒Жр░░р▒Бр░Чр▒Б, р░кр░╛р░▓р▒Б, р░бр▒Нр░░р▒Ир░лр▒Нр░░р▒Вр░Яр▒Нр░╕р▒Н р░др░┐р░ир░Вр░бр░┐.
р░бр░╛р░Вр░бр▒Нр░░р░лр▒Н р░╖р░╛р░Вр░кр▒В р░╡р░╛р░░р░╛р░ир░┐р░Хр░┐ 2 р░╕р░╛р░░р▒Нр░▓р▒Б р░╡р░╛р░бр░Вр░бр░┐.
р░Ьр░Вр░Хр▒Н р░лр▒Бр░бр▒Н р░др░Чр▒Нр░Чр░┐р░Вр░Ър░Вр░бр░┐.
р░др░▓р░ир▒Б р░╢р▒Бр░нр▒Нр░░р░Вр░Чр░╛ р░Йр░Вр░Ър░Вр░бр░┐.""",

        "Hindi": """рдЬреНрдпрд╛рджрд╛ рдкрд╛рдиреА рдкрд┐рдПрдВ рдФрд░ рдлрд▓ рдЦрд╛рдПрдВред
рджрд╣реА, рджреВрдз рдФрд░ рдбреНрд░рд╛рдИ рдлреНрд░реВрдЯреНрд╕ рд▓реЗрдВред
рдПрдВрдЯреА рдбреИрдВрдбреНрд░рдл рд╢реИрдореНрдкреВ рд╣рдлреНрддреЗ рдореЗрдВ 2 рдмрд╛рд░ рд▓рдЧрд╛рдПрдВред
рдЬрдВрдХ рдлреВрдб рдХрдо рдХрд░реЗрдВред
рд╕реНрдХреИрд▓реНрдк рд╕рд╛рдл рд░рдЦреЗрдВред""",

        "Tamil": """роирпАро░рпН роЕродро┐роХрооро╛роХ роХрпБроЯро┐родрпНродрпБ рокро┤роЩрпНроХро│рпН роЪро╛рокрпНрокро┐роЯрпБроЩрпНроХро│рпН.
родропро┐ро░рпН, рокро╛ро▓рпН рооро▒рпНро▒рпБроорпН роироЯрпНро╕рпН роОроЯрпБродрпНродрпБроХрпНроХрпКро│рпНро│рпБроЩрпНроХро│рпН.
ро╡ро╛ро░родрпНродро┐ро▒рпНроХрпБ 2 роорпБро▒рпИ роЯро╛рогрпНроЯрпНро░роГрокрпН ро╖ро╛роорпНрокрпБ рокропройрпНрокроЯрпБродрпНродрпБроЩрпНроХро│рпН.
роЬроЩрпНроХрпН роЙрогро╡рпИ роХрпБро▒рпИроХрпНроХро╡рпБроорпН.
родро▓рпИроЪрпН роЪро░рпБроородрпНродрпИ роЪрпБродрпНродрооро╛роХ ро╡рпИродрпНродрпБроХрпНроХрпКро│рпНро│рпБроЩрпНроХро│рпН."""
    },

    "Oily": {
        "English": """Wash hair regularly.
Drink lemon water and eat fruits.
Avoid fried and oily foods.
Eat dal, vegetables and curd.
Keep pillow covers clean.""",

        "Telugu": """р░др░▓р░╕р▒Нр░ир░╛р░ир░В р░др░░р░Ър▒Бр░Чр░╛ р░Ър▒Зр░пр░Вр░бр░┐.
р░ир░┐р░ор▒Нр░ор░░р░╕р░В р░ир▒Ар░░р▒Б р░др░╛р░Чр░Вр░бр░┐, р░кр░Вр░бр▒Нр░▓р▒Б р░др░┐р░ир░Вр░бр░┐.
р░лр▒Нр░░р▒Ир░бр▒Н р░ор░░р░┐р░пр▒Б р░Жр░пр░┐р░▓р▒Н р░лр▒Бр░бр▒Н р░др░Чр▒Нр░Чр░┐р░Вр░Ър░Вр░бр░┐.
р░кр░кр▒Нр░кр▒Бр░▓р▒Б, р░Хр▒Вр░░р░Чр░╛р░пр░▓р▒Б, р░кр▒Жр░░р▒Бр░Чр▒Б р░др░┐р░ир░Вр░бр░┐.""",

        "Hindi": """рдмрд╛рд▓ рдирд┐рдпрдорд┐рдд рдзреЛрдПрдВред
рдиреАрдВрдмреВ рдкрд╛рдиреА рдкрд┐рдПрдВ рдФрд░ рдлрд▓ рдЦрд╛рдПрдВред
рддрд▓рд╛ рд╣реБрдЖ рдФрд░ рдЬреНрдпрд╛рджрд╛ рддреЗрд▓ рд╡рд╛рд▓рд╛ рдЦрд╛рдирд╛ рдХрдо рдХрд░реЗрдВред
рджрд╛рд▓, рд╕рдмреНрдЬреА рдФрд░ рджрд╣реА рдЦрд╛рдПрдВред""",

        "Tamil": """роорпБроЯро┐ропрпИ роЕроЯро┐роХрпНроХроЯро┐ роХро┤рпБро╡рпБроЩрпНроХро│рпН.
роОро▓рпБрооро┐роЪрпНроЪрпИ роирпАро░рпН роХрпБроЯро┐родрпНродрпБ рокро┤роЩрпНроХро│рпН роЪро╛рокрпНрокро┐роЯрпБроЩрпНроХро│рпН.
ро╡ро▒рпБродрпНрод рооро▒рпНро▒рпБроорпН роЕродро┐роХ роОрогрпНрогрпЖропрпН роЙрогро╡рпИ родро╡ро┐ро░рпНроХрпНроХро╡рпБроорпН.
рокро░рпБрокрпНрокрпБ, роХро╛ропрпНроХро▒ро┐ рооро▒рпНро▒рпБроорпН родропро┐ро░рпН роЪро╛рокрпНрокро┐роЯрпБроЩрпНроХро│рпН."""
    },

    "Healthy": {
        "English": """Your scalp looks healthy!
Drink milk daily.
Eat eggs, fruits, vegetables and dal.
Drink enough water.
Maintain good hair hygiene.""",

        "Telugu": """р░ор▒А р░др░▓ р░Жр░░р▒Лр░Чр▒Нр░пр░Вр░Чр░╛ р░Йр░Вр░жр░┐!
р░кр▒Нр░░р░др░┐р░░р▒Лр░Ьр▒В р░кр░╛р░▓р▒Б р░др░╛р░Чр░Вр░бр░┐.
р░Чр▒Бр░бр▒Нр░▓р▒Б, р░кр░Вр░бр▒Нр░▓р▒Б, р░Хр▒Вр░░р░Чр░╛р░пр░▓р▒Б, р░кр░кр▒Нр░кр▒Бр░▓р▒Б р░др░┐р░ир░Вр░бр░┐.
р░ир▒Ар░░р▒Б р░Ор░Хр▒Нр░Хр▒Бр░╡р░Чр░╛ р░др░╛р░Чр░Вр░бр░┐.""",

        "Hindi": """рдЖрдкрдХрд╛ рд╕реНрдХреИрд▓реНрдк рд╕реНрд╡рд╕реНрде рд╣реИ!
рд░реЛрдЬ рджреВрдз рдкрд┐рдПрдВред
рдЕрдВрдбреЗ, рдлрд▓, рд╕рдмреНрдЬрд┐рдпрд╛рдВ рдФрд░ рджрд╛рд▓ рдЦрд╛рдПрдВред
рдкрд░реНрдпрд╛рдкреНрдд рдкрд╛рдиреА рдкрд┐рдПрдВред""",

        "Tamil": """роЙроЩрпНроХро│рпН родро▓рпИроорпБроЯро┐ роЖро░рпЛроХрпНроХро┐ропрооро╛роХ роЙро│рпНро│родрпБ!
родро┐ройроорпБроорпН рокро╛ро▓рпН роХрпБроЯро┐роХрпНроХро╡рпБроорпН.
роорпБроЯрпНроЯрпИ, рокро┤роЩрпНроХро│рпН, роХро╛ропрпНроХро▒ро┐роХро│рпН рооро▒рпНро▒рпБроорпН рокро░рпБрокрпНрокрпБ роЪро╛рокрпНрокро┐роЯрпБроЩрпНроХро│рпН.
роирпАро░рпН роЕродро┐роХрооро╛роХ роХрпБроЯро┐роХрпНроХро╡рпБроорпН."""
    }
}


# ----------------------------------
# Language Selection
# ----------------------------------
lang = st.selectbox("Choose Language", ["English", "Telugu", "Hindi", "Tamil"])

# ----------------------------------
# Image Upload
# ----------------------------------
uploaded_file = st.file_uploader(
    "Upload Scalp Image",
    type=["jpg", "jpeg", "png"]
)

# ----------------------------------
# Prediction
# ----------------------------------
if uploaded_file is not None:

    img = Image.open(uploaded_file).resize((128,128))
    st.image(img, caption="Uploaded Image", use_container_width=True)

    img_array = np.array(img)/255.0
    img_array = np.expand_dims(img_array, axis=0)

    prediction = model.predict(img_array)
    result = classes[np.argmax(prediction)]

    st.success(f"Prediction: **{result}**")
    st.info(suggestions[result][lang])

st.markdown(
    """
    <style>
    /* Make sidebar wider */
    [data-testid="stSidebar"] {
        width: 400px;
        min-width: 400px;
    }

    /* Optional: adjust main content to avoid overlap */
    [data-testid="stMainContent"] {
        margin-left: 410px;
    }

    /* Increase font size for sidebar titles */
    [data-testid="stSidebar"] h1, 
    [data-testid="stSidebar"] h2, 
    [data-testid="stSidebar"] h3 {
        font-size: 28px;  /* for titles/headers */
    }

    /* Increase font size for regular sidebar text */
    [data-testid="stSidebar"] p, 
    [data-testid="stSidebar"] li {
        font-size: 20px;  /* for text and list items */
    }
    "<h2 style='text-align: center; font-weight: bold;'>This is a bold centered sentence</h2>"
    </style>
    """,
    unsafe_allow_html=True
)
st.sidebar.title("AICW (Artificial Intellegence Career For Women) By Microsoft and SAP in collaboration with Edunet Foundation")
st.sidebar.title("ЁЯСе Team Information")
  # Replace with your guide's name

st.sidebar.write("**Team Members:**")
st.sidebar.write("- Rishitha Krishna Supraja.G")  
st.sidebar.write("- Giduthoori Poojitha")
st.sidebar.write("- Kakinada Sri Charanya")
st.sidebar.title("PROJECT GUIDE")
st.sidebar.write("### Abdul Aziz Md")
st.sidebar.write("Master Trainer-Edunet Foundation")

